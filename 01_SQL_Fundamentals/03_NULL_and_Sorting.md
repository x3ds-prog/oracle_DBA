# Модуль 1: Основы SQL

## Урок 3: Сортировка данных и поведение `NULL`

В Linux, чтобы упорядочить вывод, вы передаете его команде `sort`. В SQL для этого существует оператор `ORDER BY`. Он применяется в самом конце выполнения запроса, уже после того, как все строки отобраны и все вычисления в `SELECT` сделаны.

### Сортировка: `ORDER BY`

Оператор `ORDER BY` позволяет сортировать результат по одной или нескольким колонкам. По умолчанию сортировка происходит по возрастанию (`ASC` - Ascending).

Давайте отсортируем наших сотрудников по зарплате:

```sql
SELECT * FROM employees ORDER BY salary;
```
Или, указав направление явно:
```sql
SELECT * FROM employees ORDER BY salary ASC;
```
Чтобы отсортировать по убыванию, используется ключевое слово `DESC` (Descending):
```sql
SELECT * FROM employees ORDER BY salary DESC;
```

### Ловушка: Сортировка и `NULL`

Давайте усложним наш набор данных. Добавим сотрудника, чья зарплата нам неизвестна.

```sql
-- Добавим еще одного сотрудника без зарплаты
INSERT INTO employees VALUES (3, 'Peter Jones', NULL);
```

Теперь снова выполним сортировку по возрастанию:

```sql
SELECT * FROM employees ORDER BY salary ASC;
```

**Каков будет результат?** Где окажется строка с `NULL`? В начале, как если бы это был 0? Или в конце?

**Результат в Oracle:**
```
        ID NAME                                                   SALARY
---------- -------------------------------------------------- ----------
         1 John Doe                                                50000
         2 Jane Smith                                              60000
         3 Peter Jones
```
Здесь мы сталкиваемся с еще одной особенностью, специфичной для вендора СУБД.

> **Поведение Oracle по умолчанию:**
>
> -   При сортировке по возрастанию (`ASC`), `NULL` значения считаются "самыми большими" и помещаются **в конец** списка (`NULLS LAST`).
> -   При сортировке по убыванию (`DESC`), `NULL` значения считаются "самыми маленькими" и помещаются **в начало** списка (`NULLS FIRST`).

Это логично: база данных отодвигает "неизвестные" значения, чтобы не мешать анализу известных данных. Однако такое поведение не является универсальным для всех баз данных. Например, PostgreSQL по умолчанию всегда считает `NULL` больше любого другого значения.

### Явное управление сортировкой `NULL`

Что если бизнес-логика требует, чтобы сотрудники без зарплаты всегда были в начале списка, независимо от направления сортировки?

Oracle SQL предоставляет явный синтаксис для управления этим: `NULLS FIRST` и `NULLS LAST`.

**Пример: Показать сотрудников с неизвестной зарплатой первыми, а остальных — по возрастанию зарплаты.**

```sql
SELECT * FROM employees ORDER BY salary ASC NULLS FIRST;
```
**Результат:**
```
        ID NAME                                                   SALARY
---------- -------------------------------------------------- ----------
         3 Peter Jones
         1 John Doe                                                50000
         2 Jane Smith                                              60000
```
Этот синтаксис дает вам полный контроль над выводом, что крайне важно при составлении отчетов. Умение управлять сортировкой `NULL` — это один из тех мелких, но важных навыков, которые отличают профессионала.

### Итоги Модуля 1

Поздравляю! Вы завершили первый модуль и освоили абсолютные основы SQL:

-   Вы умеете получать данные (`SELECT`), создавать таблицы (`CREATE`), и добавлять в них записи (`INSERT`).
-   Вы понимаете **декларативную** природу SQL и **логический порядок выполнения** запроса.
-   Вы знаете, как фильтровать строки (`WHERE`) и почему нельзя использовать псевдонимы колонок в этом операторе.
-   Вы познакомились с `NULL` и его особым поведением в вычислениях и сортировке.
-   Вы научились сортировать результат (`ORDER BY`) и управлять положением `NULL`.

В следующем модуле мы перейдем к более сложным и мощным возможностям SQL: объединению данных из нескольких таблиц.
